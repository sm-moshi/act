minimum_pre_commit_version: "3.8.0"

default_install_hook_types:
  - pre-commit
  - post-merge
  - post-rewrite

default_stages: [pre-commit]

exclude: |
  (?x)^(
    report/|
    pkg/runner/testdata/|
    .*testdata/|
    vendor/|
    \.venv/|
    pkg/container/docker_cli\.go|
    pkg/container/DOCKER_LICENSE|
    VERSION|
    install\.sh
  )

repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
      - id: check-yaml
        args: [--allow-multiple-documents]
      - id: check-json
      - id: check-merge-conflict
      - id: detect-private-key

  - repo: https://github.com/renovatebot/pre-commit-hooks
    rev: 42.84.0
    hooks:
      - id: renovate-config-validator
        args: [--strict]
        files: ^renovate\.json$

  - repo: local
    hooks:
      - id: fmt-go
        name: gofmt (mise)
        entry: mise run fmt-go
        language: system
        pass_filenames: false

      - id: lint-go
        name: golangci-lint (mise)
        entry: mise run lint-go
        language: system
        pass_filenames: false

      - id: lint-actions
        name: actionlint (mise)
        entry: mise run lint-actions
        language: system
        pass_filenames: false

      - id: lint-spelling
        name: codespell (mise)
        entry: mise run lint-spelling
        language: system
        pass_filenames: false

      - id: lint-markdown
        name: markdownlint (mise)
        entry: mise run lint-markdown
        language: system
        pass_filenames: false

      - id: lint-secrets
        name: gitleaks (mise)
        entry: mise run lint-secrets
        language: system
        pass_filenames: false
